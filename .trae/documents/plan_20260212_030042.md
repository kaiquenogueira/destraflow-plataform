Entendido. Você tem razão. A URL está no banco de dados e deve ser injetada no momento da execução, sem depender de criar variáveis de ambiente globais ou alterar configurações que afetam a aplicação principal.

Vou ajustar a solução para ser mais direta e segura:

1.  **Reverter `prisma.config.ts`**:
    *   Vou remover a lógica condicional. Ele voltará a olhar apenas para `DATABASE_URL` (banco da aplicação), como deve ser.

2.  **Usar a flag `--url` nos Scripts de Sincronização**:
    *   O Prisma CLI tem uma opção `--url` que permite sobrescrever a conexão definida no arquivo de configuração.
    *   Vou alterar o `src/actions/tenant-sync.ts` e `scripts/sync-tenants.ts` para passar a string de conexão (descriptografada do banco) diretamente para o comando:
        `npx prisma db push --schema=prisma/schema.tenant.prisma --url="postgresql://..."`
    *   Isso garante que o comando conecte no banco correto sem precisar de variáveis de ambiente.

3.  **Remover script perigoso do `package.json`**:
    *   Vou remover o `db:push:tenant` do `package.json` porque rodá-lo manualmente (sem passar uma URL) agora conectaria acidentalmente no CRM (já que o config padrão aponta pra lá). A sincronização deve ser feita sempre via aplicação ou script de massa, como você definiu.

Essa abordagem respeita exatamente sua fronteira: Migrations/Config Global = Aplicação. Sincronização de Tenant = Injeção dinâmica via Aplicação.
